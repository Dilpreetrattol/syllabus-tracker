{% extends 'coordinator_base.html' %}
{% set active_section = 'dashboard' %}
{% block title %}Coordinator Dashboard{% endblock %}
{% block coordinator_content %}
    <div class="hero">
        <div>
            <h1 class="h1">Coordinator Dashboard</h1>
            <p style="margin:0; opacity:0.9;">Manage university academics and faculty</p>
        </div>
        <div class="avatar">{{ (current_user.name.split()[0][0] + (current_user.name.split()[1][0] if current_user.name.split()|length>1 else ''))|upper }}</div>
    </div>

    <div class="stats">
        <div class="stat">
            <div class="label">Total Users</div>
            <div class="num">{{ metrics.total_users }}</div>
        </div>
        <div class="stat">
            <div class="label">Active Subjects</div>
            <div class="num">{{ metrics.active_subjects }}</div>
        </div>
        <div class="stat">
            <div class="label">Unassigned Teachers</div>
            <div class="num">{{ metrics.unassigned_teachers }}</div>
        </div>
    </div>

    <div class="quick-actions">
        <a class="quick-action" href="{{ url_for('dashboard.coordinator_users') }}">
            <div style="font-size:20px;margin-bottom:8px;">ğŸ‘¥</div>
            <div>Manage Users</div>
        </a>
        <a class="quick-action" href="{{ url_for('dashboard.coordinator_subjects') }}">
            <div style="font-size:20px;margin-bottom:8px;">ğŸ“š</div>
            <div>Manage Subjects</div>
        </a>
        <a class="quick-action" href="{{ url_for('dashboard.coordinator_enrollments') }}">
            <div style="font-size:20px;margin-bottom:8px;">ğŸ“</div>
            <div>Enrollments</div>
        </a>
    </div>

    <div class="activity">
        <h2 class="h2">Recent Activity</h2>
        {% if recent_activity %}
            {% for a in recent_activity %}
                <div class="activity-item">
                    <div class="icon">ğŸ“</div>
                    <div style="flex:1;">
                        <div style="font-weight:700;color:var(--cp-text)">{{ a.action or a.message or 'Activity' }}</div>
                        <div class="muted" style="font-size:13px;margin-top:4px">{{ a.timestamp.strftime('%b %d, %Y %I:%M %p') }}</div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="card">
                <p class="muted" style="text-align:center;margin:0;">No recent activity to display.</p>
            </div>
        {% endif %}
    </div>
{% endblock %}
